<html>
<script>
    var threshold_samples = []
    threshold_samples.push(100,33.3,11.1,3.7,1.23,0.412,0.137,0.0457,0.0152,0.00508,0.00169)
    var threshold_samples_dB = threshold_samples.map(Math.log10)
    
    threshold_samples_dB = threshold_samples_dB.map(element => element*20)
    console.log("SAMPLES dB")
    console.log(threshold_samples)
    console.log(threshold_samples_dB)
    var TestValue = 4.56
    function FindClosestBottle(TestValue, threshold_samples)
    {
        // Find the value closest to the test value
        // Calculate the difference score
        // console.log("DIFFERENCE")
        var diff = threshold_samples.map(e => e-TestValue)
        // console.log(diff)
        // find the absolute value
        var absArr = diff.map(e => Math.abs(e))
        // console.log(absArr)
        // Find the minimum value
        minVal = Math.min(...absArr)
        // console.log(minVal)
        indexMinVal = absArr.indexOf(minVal)
        return indexMinVal
    }

    console.log("Min Threshold value to: "+TestValue)
    console.log("is: "+threshold_samples_dB[FindClosestBottle(TestValue,threshold_samples_dB)]+" dB")
    console.log("is: "+threshold_samples[FindClosestBottle(TestValue,threshold_samples_dB)])

</script>
    
</html>